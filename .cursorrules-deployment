# Render Deployment Configuration

## Live URLs

- **Frontend (Game)**: https://simon-game-bd0t.onrender.com
- **Backend (API/WebSocket)**: https://simon-game-backend-1094.onrender.com

## GitHub Repository

- **Repo**: https://github.com/yonatanbiwix/simon-game-app
- **Branch**: main
- **Auto-deploy**: Enabled (on commit)

---

## Services

### Backend: simon-game-backend

| Property | Value |
|----------|-------|
| Service ID | srv-d5hpiaur433s73btr6lg |
| Type | Web Service |
| URL | https://simon-game-backend-1094.onrender.com |
| Dashboard | https://dashboard.render.com/web/srv-d5hpiaur433s73btr6lg |
| Runtime | Node.js |
| Region | Oregon |
| Plan | Starter |
| Build Command | `npm install && npm run build` |
| Start Command | `npm start` |
| Port | 10000 |

#### Environment Variables (Backend)

| Variable | Value |
|----------|-------|
| NODE_ENV | production |
| PORT | 10000 |
| JWT_SECRET | (auto-generated) |
| FRONTEND_URL | https://simon-game-bd0t.onrender.com |

---

### Frontend: simon-game

| Property | Value |
|----------|-------|
| Service ID | srv-d5hs94h5pdvs73bm3ga0 |
| Type | Static Site |
| URL | https://simon-game-bd0t.onrender.com |
| Dashboard | https://dashboard.render.com/static/srv-d5hs94h5pdvs73bm3ga0 |
| Plan | Starter |
| Build Command | `cd frontend && npm install && npm run build` |
| Publish Path | frontend/dist |

#### Environment Variables (Frontend)

| Variable | Value |
|----------|-------|
| VITE_API_URL | https://simon-game-backend-1094.onrender.com |
| VITE_SOCKET_URL | https://simon-game-backend-1094.onrender.com |
| NODE_VERSION | 20.19.0 |

---

## Deployment Notes

### Build Requirements

1. **No package-lock.json in frontend**: The frontend folder should NOT have a package-lock.json committed. npm will generate fresh dependencies during build.
2. **Node Version**: 20.19.0 (specified via NODE_VERSION env var)
3. **Public npm registry**: The setup.sh uses `https://registry.npmjs.org` (NOT Wix internal registry)

### If Frontend Build Fails

1. Ensure `frontend/package-lock.json` is NOT in the repo
2. Check that NODE_VERSION=20.19.0 is set in environment variables
3. Verify packages in package.json are compatible with Node 20.19.0
4. Run `git rm frontend/package-lock.json` if it was accidentally committed

### Manual Deploy

To trigger a manual deploy:
1. Go to the service dashboard
2. Click "Manual Deploy" -> "Deploy latest commit"

---

## Architecture

```
                         INTERNET
                            |
          +-----------------+-----------------+
          v                                   v
+-------------------+             +-------------------+
|   Static Site     |             |    Web Service    |
|   (Frontend)      |             |    (Backend)      |
|                   |             |                   |
| simon-game-bd0t   |<----------->| simon-game-       |
| .onrender.com     |  WebSocket  | backend-1094      |
|                   |  + REST API | .onrender.com     |
+-------------------+             +-------------------+
        |                                   |
        | Vite Build                       | Node.js
        | React + TypeScript               | Express + Socket.io
        | Tailwind CSS                     | JWT Auth
        +-----------------------------------+
```
